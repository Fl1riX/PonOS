# CHANGELOG

# CHANGELOG

## [0.0.5.1] - 2025-11-09
### Добавлено
- **Переход в защищённый режим (32-бит):**
  - Реализована GDT с дескрипторами кода и данных (плоская модель памяти)
  - Включение линии A20 через порт `0x92`
  - Установка бита PE в `CR0` и дальний переход в 32-битный код
  - Дескрипторы сегментов с базой 0x00000000 и лимитом 4GB

### Изменено
- **Архитектура загрузки:**
  - Загрузчик теперь переходит в защищенный режим вместо работы в реальном режиме
  - Управление передается ядру через `jmp CODE_SEG:0x1000` (дальний переход в защищенном режиме)
  - Прерывания остаются отключенными (`cli`) после загрузки ядра

### Удалено
- **Работа в реальном режиме:**
  - Удален прямой переход `jmp 0x1000` в реальном режиме
  - Удалена инструкция `sti` (включение прерываний)
  - Удалено сообщение `stack_inited`

### Исправлено
- **Логика работы LBA:**
  - Исправлены переходы после операций чтения диска
  - Убраны недостижимые инструкции после меток `.chs` и `.lba`

---

## [0.0.5] - 2025-09-13
### Добавлено
- **Командная строка с базовыми командами:**
- `help` - отображение списка доступных команд
- `reboot` - перезагрузка системы
- `calc` - запуск калькулятора (в разработке)
- `clear` - очистка экрана
- **Система обработки команд:**
- Буфер клавиатуры на 254 символа
- Функция сравнения строк для распознавания команд
- Обработка клавиши Enter для выполнения команд
- **Улучшенная обработка ввода:**
- Корректная работа Backspace с управлением курсором
- Автоматическая очистка буфера при переполнении
- Проверка границ строки при удалении символов
- **Пользовательский интерфейс:**
- ASCII-баннер "PonOS" при запуске
- Приветственное сообщение с инструкциями
- Сообщения об ошибках для неизвестных команд

### Изменено
- Переработана архитектура ядра для поддержки командной строки
- Улучшена стабильность работы с клавиатурой
- Оптимизирована работа с буфером ввода

---

## [0.0.4] - 2025-08-21
### Добавлено
- Поддержка ввода текста с клавиатуры
- Стирание символа при помощи backspace

---

## [0.0.3] - 2025-08-15
### Добавлено
- Двухэтапная загрузка системы:
- **MBR-загрузчик** (512 байт) - начальная загрузка с диска
- **Второй загрузчик** - загрузка ядра ОС и подготовка окружения
- Поддержка LBA-чтения через DAP 

### Изменено
- Реорганизована структура загрузки:
- MBR (0x7C00) → Второй загрузчик (0x8000) → Ядро (0x10000)
- Обновлен скрипт сборки для поддержки двух загрузчиков

---

## [0.0.2] - 2025-08-14
### Добавлено
- Сохранение номера загрузочного устройства для правильной загрузки с любого носителя
- Информационные сообщения в загрузчике
- Загрузка нескольких секторов с ядром с диска
- Вывод кодов ошибок при чтении с диска

---

## [0.0.1] - 2025-08-10
### Добавлено
- Инициализация проекта PonOS
- Базовый MBR-загрузчик (512 байт)
- Загрузка с диска по CHS
- Вывод текста в текстовом видеорежиме